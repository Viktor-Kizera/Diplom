@extends('parts.layout')

@section('content')

    <div class="title__section" style="
    background: url(https://image.tmdb.org/t/p/original{{ $movie['backdrop_path'] }});
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    ">
        <div class="container-movie">
            <div class="content__TS-up">
                <div class="left__block">
                    <h1 class="bd-72">{{ $movie['title'] }}</h1>
                    <h6 class="mm-24">{{ $movie['runtime'] }} хв {{ \App\Services\FilmHelper::getYear($movie['release_date']) }} - {{ \App\Services\FilmHelper::getCountry($movie['production_countries']) }}</h6>
                    <div class="block__stars">
                        <?php $i = 0; while ($i < intval($movie['vote_average'])) { ?>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.7893 1.2108C9.23765 0.132857 10.7647 0.132857 11.213 1.2108L13.295 6.21652L18.6991 6.64976C19.8628 6.74306 20.3347 8.19535 19.4481 8.95485L15.3307 12.4818L16.5886 17.7553C16.8595 18.8909 15.6241 19.7884 14.6278 19.1799L10.0012 16.354L5.37451 19.1799C4.37819 19.7884 3.1428 18.8909 3.41368 17.7553L4.6716 12.4818L0.554252 8.95485C-0.332388 8.19535 0.139485 6.74306 1.30322 6.64976L6.70731 6.21652L8.7893 1.2108Z" fill="#E5DB22"/>
                        </svg>
                        <?php $i++; } ?>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.7893 1.2108C9.23765 0.132857 10.7647 0.132857 11.213 1.2108L13.295 6.21652L18.6991 6.64976C19.8628 6.74306 20.3347 8.19535 19.4481 8.95485L15.3307 12.4818L16.5886 17.7553C16.8595 18.8909 15.6241 19.7884 14.6278 19.1799L10.0012 16.354L5.37451 19.1799C4.37819 19.7884 3.1428 18.8909 3.41368 17.7553L4.6716 12.4818L0.554252 8.95485C-0.332388 8.19535 0.139485 6.74306 1.30322 6.64976L6.70731 6.21652L8.7893 1.2108Z" fill="#E5DB22"/>
                        </svg>
                    </div>
                    <div class="block__icons">
                        <div class="icon__item save">
                            <svg class="" width="22" height="26" viewBox="0 0 22 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18.4578 1.42988C19.9252 1.60018 21 2.86533 21 4.34265V25L11 20L1 25V4.34265C1 2.86533 2.07477 1.60018 3.54224 1.42988C5.98875 1.14595 8.47733 1 11 1C13.5227 1 16.0113 1.14595 18.4578 1.42988Z" stroke="#EBFAFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="icon__item like">
                            <svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.24155 23.0069C7.53275 23.7493 8.26087 24.1665 9.00423 24.1665H10.0377C10.6272 24.1665 11.2129 24.2618 11.7721 24.4486L15.9149 25.8328C16.5763 26.0538 17.269 26.1665 17.9663 26.1665H23.3082C24.2596 26.1665 25.2091 25.7841 25.8327 25.008C28.1057 22.1788 29.4665 18.5812 29.4665 14.6665C29.4665 14.07 29.4349 13.4806 29.3733 12.9002C29.197 11.2411 27.7184 10.1665 26.1435 10.1665H21.9856C21.7889 10.1665 21.6124 10.0549 21.5012 9.85122C21.3877 9.6433 21.3712 9.38481 21.4726 9.17114C22.1207 7.80544 22.4831 6.27768 22.4831 4.6665C22.4831 2.73462 20.9204 1.1665 18.9902 1.1665C18.1619 1.1665 17.4925 1.83919 17.4925 2.6665V3.51101C17.4925 4.21087 17.3593 4.90429 17.1 5.55404C16.7524 6.42522 16.0223 7.10971 15.1307 7.5857C13.5871 8.4097 12.2371 9.54911 11.1661 10.918C10.7854 11.4045 10.3 11.7854 9.76688 11.9923C9.43709 12.1203 9.04113 12.3169 8.75676 12.6792C7.35493 14.465 6.51853 16.7186 6.51853 19.1665C6.51853 20.521 6.77468 21.8168 7.24155 23.0069ZM1.67342 13.1197C0.936988 14.9928 0.532715 17.0329 0.532715 19.1665C0.532715 20.8431 0.782377 22.4623 1.24682 23.988C1.66603 25.3652 2.98339 26.1665 4.34871 26.1665H5.55623C6.56659 26.1665 7.1056 25.07 6.70125 24.2486C5.94719 22.7168 5.52326 20.992 5.52326 19.1665C5.52326 16.9828 6.12993 14.9427 7.18317 13.2046C7.68111 12.3829 7.16389 11.1665 6.09022 11.1665H4.68986C3.41094 11.1665 2.16591 11.8671 1.67342 13.1197Z" stroke="#EBFAFF"/>
                            </svg>
                        </div>
                        <div class="icon__item dislike">
                            <svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.24477 3.0586L8.39294 2.8335L8.66242 2.8335L10.0385 2.8335C10.628 2.8335 11.2136 2.73824 11.7729 2.55137L15.9157 1.16717C16.5771 0.946172 17.2698 0.833498 17.967 0.833497L23.309 0.833496C24.2603 0.833496 25.2099 1.21592 25.8334 1.99204C28.1065 4.82122 29.4673 8.41882 29.4673 12.3335C29.4673 12.93 29.4357 13.5194 29.374 14.0998C29.1978 15.7589 27.7191 16.8335 26.1443 16.8335L21.9864 16.8335C21.7897 16.8335 21.6132 16.9451 21.502 17.1488C21.3885 17.3567 21.3719 17.6152 21.4733 17.8289C22.1214 19.1946 22.4838 20.7223 22.4838 22.3335C22.4838 24.2654 20.9211 25.8335 18.9909 25.8335C18.1627 25.8335 17.4933 25.1608 17.4933 24.3335V23.489C17.4933 22.7891 17.3601 22.0957 17.1008 21.446C16.7531 20.5748 16.0231 19.8903 15.1314 19.4143C13.5878 18.5903 12.2379 17.4509 11.1669 16.0821C10.5743 15.3247 9.74014 14.8335 8.85837 14.8335L8.66243 14.8335L8.39294 14.8335L8.24478 14.6084C7.15407 12.9513 6.51929 10.9659 6.51929 8.8335C6.51929 6.70108 7.15406 4.71566 8.24477 3.0586ZM1.67418 14.8803C0.937754 13.0072 0.53348 10.9671 0.533478 8.8335C0.533478 7.15686 0.783136 5.53775 1.24758 4.01196C1.66678 2.63478 2.98415 1.8335 4.34947 1.8335L5.55699 1.8335C6.56735 1.8335 7.10636 2.92996 6.70201 3.75139C5.94795 5.28322 5.52402 7.008 5.52402 8.8335C5.52402 11.0172 6.13069 13.0573 7.18394 14.7954C7.68188 15.6171 7.16466 16.8335 6.09098 16.8335H4.69062C3.41171 16.8335 2.16668 16.1329 1.67418 14.8803Z" stroke="#EBFAFF"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="right__block">
                    <div class="button__block-movie">
                        <button class="mm-24">
                            <svg width="26" height="28" viewBox="0 0 26 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 3.42096C0.5 1.04407 3.04833 -0.462685 5.131 0.68278L24.3653 11.2616C26.524 12.4489 26.524 15.5507 24.3653 16.738L5.13099 27.3169C3.04833 28.4623 0.5 26.9556 0.5 24.5787V3.42096Z" fill="#EBFAFF"/>
                            </svg>
                            Дивитися зараз
                        </button>
                        <button>
                            <a class="mm-24" href="#">
                                Опис
                            </a>
                        </button>
                    </div>
                </div>
            </div>
            <div class="content__TS-bottom">
                <div class="block__img">
                    @foreach ($images as $key => $image)
                        @if($key === 5) @break; @endif
                    <div class="img__item">
                        <img src="https://image.tmdb.org/t/p/original{{ $image['file_path'] }}">
                    </div>
                    @endforeach
                </div>
            </div>
        </div>
    </div>
    <section class="about__section">
        <div class="container-movie">
            <h1 class="bd-72">Про {{ $movie['title'] }}</h1>
            <p class="mm-24">{{ $movie['overview'] }}</p>
        </div>
    </section>
    <section class="genres__section">
        <div class="container-movie">
            <h2 class="bd-48">Жанри</h2>
            <ul>
                @foreach ($movie['genres'] as $genre)
                <li>
                    <button>{{ $genre['name'] }}</button>
                </li>
                @endforeach
            </ul>
        </div>
    </section>

    <section class="suggestion__section">
        <div class="container-movie">
            <h2 class="bd-48">Cхожі до “{{ $movie['title'] }}”</h2>
            <div class="all__movie__slider">
                @foreach ($similars as $similar)
                    @if (empty($similar['poster_path'])) @continue; @endif;
                <div class="item__movie">
                    <div class="add__button-movie">
                    </div>
                    <a href="/movie/{{ $similar['id'] }}">
                        <img src="https://image.tmdb.org/t/p/original{{$similar['poster_path']}}" alt="{{ $similar['title'] }}">
                    </a>
                </div>
                @endforeach
            </div>
        </div>
    </section>
    <section class="comments__section">
        <div class="container-movie">
            <div class="title-and-button">
                <h2 class="bd-48">
                    Коментарі
                </h2>

            </div>
            <div class="all__commentars all__commentars__Slider">
                @foreach ($reviews as $review)
                <div class="item__commentar">
                    <div class="item__commentar-content">
                        <div class="username__block">
                            <img src="https://image.tmdb.org/t/p/original{{ isset($review['author_details']) ? $review['author_details']['avatar_path'] : '' }}" alt="User Photo">
                            <p class="mm-16">{{ isset($review['author']) ? $review['author'] : $review['author'] }}</p>
                        </div>
                        <div class="response">
                            <p class="mm-16">{{ \Illuminate\Support\Str::substr($review['content'], 0, 100) }}...</p>
                        </div>
                        <div class="like-dislake__block">
                            <div class="content-block__like-dislake">
                                <div class="block__dislake" id="dislike">
                                    <svg class="counter__clicker" width="12" height="9" viewBox="0 0 12 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M4.13487 0.750001L3.61763 0.750001C3.22723 1.34171 3 2.05057 3 2.8125C3 3.57443 3.22724 4.28329 3.61763 4.875L3.69128 4.875C4.09446 4.875 4.45824 5.09792 4.70705 5.41517C5.09363 5.90808 5.58085 6.3183 6.13777 6.61489C6.49884 6.80718 6.81214 7.09286 6.96407 7.47268C7.07038 7.73845 7.125 8.02207 7.125 8.30831V8.625C7.125 8.83211 7.29289 9 7.5 9C8.12132 9 8.625 8.49632 8.625 7.875C8.625 7.29918 8.49522 6.75368 8.26331 6.26615C8.13052 5.98698 8.31681 5.625 8.62595 5.625L10.1889 5.625C10.7022 5.625 11.1617 5.278 11.216 4.76757C11.2385 4.55646 11.25 4.34207 11.25 4.125C11.25 2.70119 10.7541 1.39321 9.9255 0.364389C9.7317 0.123743 9.4321 -8.10363e-08 9.12311 0L7.11512 5.26632e-07C6.87329 5.90058e-07 6.63304 0.0389885 6.40361 0.115463L4.84639 0.634539C4.61696 0.711013 4.37671 0.750001 4.13487 0.750001Z" fill="#808080"/>
                                        <path d="M1.16574 5.01144C0.897403 4.33053 0.75 3.58873 0.75 2.8125C0.75 2.20246 0.84104 1.61369 1.01028 1.05902C1.13996 0.634011 1.55209 0.375002 1.99644 0.375002L2.45034 0.375002C2.6731 0.375002 2.81068 0.624134 2.71211 0.823901C2.41624 1.42354 2.25 2.09861 2.25 2.8125C2.25 3.66659 2.48794 4.46511 2.90115 5.14537C3.02365 5.34705 2.88702 5.625 2.65106 5.625L2.12468 5.625C1.70867 5.625 1.31827 5.39848 1.16574 5.01144Z" fill="#808080"/>
                                    </svg>
                                    <span class="counter__display"></span>
                                </div>
                                <div class="block__like" id="like">
                                    <svg class="counter__clicker" width="12" height="9" viewBox="0 0 12 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3.7464 8.25C3.53411 8.25 3.33648 8.13175 3.2588 7.93419C3.09174 7.50934 3 7.04664 3 6.5625C3 5.68796 3.29937 4.88334 3.80122 4.24552C3.87667 4.14963 3.98728 4.09104 4.10107 4.04698C4.33748 3.95546 4.54627 3.78984 4.70705 3.58483C5.09363 3.09192 5.58085 2.6817 6.13777 2.38511C6.49884 2.19282 6.81214 1.90714 6.96407 1.52732C7.07038 1.26155 7.125 0.977933 7.125 0.691689V0.375C7.125 0.167893 7.29289 0 7.5 0C8.12132 0 8.625 0.50368 8.625 1.125C8.625 1.70081 8.49522 2.24632 8.26331 2.73385C8.13052 3.01302 8.31681 3.375 8.62595 3.375H10.1889C10.7022 3.375 11.1617 3.722 11.216 4.23243C11.2385 4.44354 11.25 4.65792 11.25 4.875C11.25 6.29881 10.7541 7.60679 9.9255 8.63561C9.7317 8.87626 9.4321 9 9.12311 9H7.11512C6.87329 9 6.63304 8.96101 6.40361 8.88454L4.84639 8.36546C4.61696 8.28899 4.37671 8.25 4.13488 8.25H3.7464Z" fill="#808080"/>
                                        <path d="M1.16574 4.36356C0.897403 5.04447 0.75 5.78627 0.75 6.5625C0.75 7.17254 0.841042 7.76131 1.01028 8.31598C1.13996 8.74099 1.55209 9 1.99644 9H2.45034C2.6731 9 2.81068 8.75087 2.71211 8.5511C2.41624 7.95146 2.25 7.27639 2.25 6.5625C2.25 5.70841 2.48794 4.9099 2.90115 4.22963C3.02365 4.02796 2.88702 3.75 2.65106 3.75H2.12468C1.70867 3.75 1.31827 3.97652 1.16574 4.36356Z" fill="#808080"/>
                                    </svg>
                                    <span class="counter__display"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @endforeach
            </div>
        </div>
    </section>


@endsection
